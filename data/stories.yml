version: "3.1"

stories:
# ---------------------------------------------------------------------------------
# HISTÓRIAS DE "CAMINHO FELIZ" (CONVERSAS IDEAIS E COMPLETAS)
# ---------------------------------------------------------------------------------
- story: Caminho feliz completo - Adicionar, Explicar, Listar, Verificar e Sair
  steps:
  - intent: saudacao
  - action: utter_saudacao
  - intent: adicionar_remedio
    entities:
    - remedio: "Dipirona"
  - action: action_adicionar_remedio
  - intent: perguntar_funcao_remedio
    entities:
    - remedio: "Dipirona"
  - action: action_explicar_remedio
  - intent: adicionar_remedio
    entities:
    - remedio: "AAS"
  - action: action_adicionar_remedio
  - intent: listar_remedios
  - action: action_listar_remedios
  - intent: verificar_interacoes
  - action: action_verificar_interacoes
  - intent: despedida
  - action: utter_despedida

- story: Caminho feliz com o bot a perguntar o nome várias vezes
  steps:
  - intent: saudacao
  - action: utter_saudacao
  - intent: adicionar_remedio
  - action: utter_ask_remedio
  - intent: informar_remedio
    entities:
    - remedio: "Ibuprofeno"
  - action: action_adicionar_remedio
  - intent: adicionar_remedio
  - action: utter_ask_remedio
  - intent: informar_remedio
    entities:
    - remedio: "Paracetamol"
  - action: action_adicionar_remedio
  - intent: listar_remedios
  - action: action_listar_remedios
  - intent: despedida
  - action: utter_despedida

- story: Utilizador começa explicando, depois adiciona e verifica
  steps:
  - intent: perguntar_funcao_remedio
    entities:
    - remedio: "Varfarina"
  - action: action_explicar_remedio
  - intent: adicionar_remedio
    entities:
    - remedio: "Varfarina"
  - action: action_adicionar_remedio
  - intent: adicionar_remedio
    entities:
    - remedio: "AAS"
  - action: action_adicionar_remedio
  - intent: verificar_interacoes
  - action: action_verificar_interacoes

# ---------------------------------------------------------------------------------
# HISTÓRIAS CURTAS E DIRETAS (FOCO EM TAREFAS ÚNICAS)
# ---------------------------------------------------------------------------------
- story: Utilizador só quer saber sobre um remédio e sai
  steps:
  - intent: perguntar_funcao_remedio
    entities:
    - remedio: "Claritromicina"
  - action: action_explicar_remedio
  - intent: agradecer
  - action: utter_despedida

- story: Utilizador só quer saber sobre um remédio (sem saudação)
  steps:
  - intent: perguntar_funcao_remedio
    entities:
    - remedio: "Losartana"
  - action: action_explicar_remedio

- story: Utilizador adiciona um remédio e depois lista
  steps:
  - intent: adicionar_remedio
    entities:
    - remedio: "Sinvastatina"
  - action: action_adicionar_remedio
  - intent: listar_remedios
  - action: action_listar_remedios

- story: Utilizador apenas lista os remédios
  steps:
  - intent: listar_remedios
  - action: action_listar_remedios

# ---------------------------------------------------------------------------------
# HISTÓRIAS DE INTERRUPÇÃO E MUDANÇA DE CONTEXTO
# ---------------------------------------------------------------------------------
- story: Interrupção com pergunta sobre o bot no meio da adição
  steps:
  - intent: adicionar_remedio
    entities:
    - remedio: "Anlodipino"
  - action: action_adicionar_remedio
  - intent: bot_challenge
  - action: utter_sou_um_bot
  - intent: adicionar_remedio
    entities:
    - remedio: "Hidroclorotiazida"
  - action: action_adicionar_remedio
  - intent: listar_remedios
  - action: action_listar_remedios

# ---------------------------------------------------------------------------------
# HISTÓRIAS PARA CASOS DE ERRO E COMPORTAMENTO INESPERADO
# ---------------------------------------------------------------------------------
- story: Tenta verificar interações com menos de 2 remédios
  steps:
  - intent: adicionar_remedio
    entities:
    - remedio: "Omeprazol"
  - action: action_adicionar_remedio
  - intent: verificar_interacoes
  - action: action_verificar_interacoes

- story: Adiciona um remédio que já está na lista
  steps:
  - intent: adicionar_remedio
    entities:
    - remedio: "Captopril"
  - action: action_adicionar_remedio
  - intent: adicionar_remedio
    entities:
    - remedio: "Captopril"
  - action: action_adicionar_remedio
